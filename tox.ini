[tox]
envlist = {py37,py38,py39}-sqlalchemy{1.0,1.1,1.2,1.3,1.4,2,latest},{py310,py311,py312}-sqlalchemy{1.2,1.3,1.4,2,latest}
skipsdist = True

[gh-actions]
python =
    3.7: py37
    3.8: py38
    3.9: py39
    3.10: py310
    3.11: py311
    3.12: py312

[testenv]
whitelist_externals = make
usedevelop = true
extras =
    dev
    mysql
    postgresql
deps =
    !sqlalchemy2-!sqlalchemylatest: sqlalchemy-utils~=0.37.8
    py311,py312: sqlalchemy-utils>=0.39
    sqlalchemy{2,latest}: sqlalchemy-utils>=0.38.3
    sqlalchemy1.0: sqlalchemy>=1.0,<1.1
    sqlalchemy1.1: sqlalchemy>=1.1,<1.2
    sqlalchemy1.2: sqlalchemy>=1.2,<1.3
    sqlalchemy1.3: sqlalchemy>=1.3,<1.4
    sqlalchemy1.4: sqlalchemy>=1.4,<1.5
    sqlalchemy2: sqlalchemy>=2.0,<2.1
commands =
    make coverage ARGS='-x -vv'
